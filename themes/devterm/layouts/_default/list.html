{{ define "main" }}
<div class="posts-list">
    {{ if .IsHome }}
    <div class="intro">
        <div class="terminal-output">
            <div class="output-line">
                <span class="comment"># {{ .Site.Params.description | default "A dev blog about vim, terminal productivity, and Linux workflows" }}</span>
            </div>
            <div class="output-line">
                <span class="prompt-small">shikamaru@blog:~$</span>
                <span class="command">find ./posts -name "*.md" | head -10</span>
            </div>
        </div>
    </div>
    {{ end }}

    <section class="posts">
        {{ $pages := .RegularPages }}
        {{ if .IsHome }}
            {{ $pages = where site.RegularPages "Section" "posts" }}
        {{ end }}
        {{ range $pages }}
        <article class="post-item">
            <div class="file-listing">
                <span class="file-permissions">-rw-r--r--</span>
                <span class="file-owner">shikamaru shikamaru</span>
                <span class="file-size">{{ len .Content }}</span>
                <span class="file-date">{{ .Date.Format "Jan 02 15:04" }}</span>
                <a href="{{ .RelPermalink }}" class="file-name">{{ .File.BaseFileName }}.md</a>
            </div>
            
            <div class="post-preview">
                <h2 class="post-title">
                    <a href="{{ .RelPermalink }}">{{ .Title }}</a>
                </h2>
                {{ if .Params.subtitle }}
                <p class="post-subtitle">{{ .Params.subtitle }}</p>
                {{ end }}
                <p class="post-summary">{{ .Summary }}</p>
                
                <div class="post-meta">
                    <time datetime="{{ .Date.Format "2006-01-02" }}">{{ .Date.Format "Jan 2, 2006" }}</time>
                    {{ with .Params.tags }}
                    <span class="post-tags">
                        {{ range . }}
                        <span class="tag">#{{ . }}</span>
                        {{ end }}
                    </span>
                    {{ end }}
                    {{ if .Params.asciinema }}
                    <span class="has-demo">ðŸ“¹ demo</span>
                    {{ end }}
                </div>
            </div>
        </article>
        {{ end }}
    </section>

    {{ if false }}
    <nav class="pagination">
        <div class="terminal-line">
            <span class="prompt-small">shikamaru@blog:~$</span>
            <span class="command">ls posts/</span>
        </div>
        <div class="pagination-links">
            <span class="pagination-info">all posts</span>
        </div>
    </nav>
    {{ end }}
</div>
{{ end }}